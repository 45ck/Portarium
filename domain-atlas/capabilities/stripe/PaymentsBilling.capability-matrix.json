{
  "schemaVersion": "1.0.0",
  "providerId": "stripe",
  "providerName": "Stripe",
  "portFamily": "PaymentsBilling",
  "adapterVersion": "0.1.0",
  "auth": {
    "modes": ["api_key", "oauth2"],
    "notes": "OpenAPI declares basicAuth and bearerAuth; adapters must declare the concrete auth mode they implement (API key vs OAuth)."
  },
  "limits": {
    "rateLimit": {
      "requestsPerMinute": 60,
      "notes": "Example placeholder; treat provider rate limits as variable and versioned."
    }
  },
  "events": {
    "supportsWebhooks": true,
    "supportsPolling": true,
    "notes": "Stripe supports webhooks; polling is possible but less desirable."
  },
  "idempotency": {
    "supportsIdempotencyKey": true,
    "keyLocations": ["header"],
    "notes": "Stripe supports idempotency keys for many write operations via the Idempotency-Key header."
  },
  "diff": {
    "supportsPlan": true,
    "supportsPredictedEffects": false,
    "supportsVerifiedEffects": true,
    "notes": "Plans are always supported (VAOP-side). Verified effects require post-write reads."
  },
  "capabilities": [
    {
      "capability": "payment-intent:write",
      "supported": true,
      "operations": [
        "createPaymentIntent",
        "confirmPaymentIntent",
        "capturePaymentIntent",
        "cancelPaymentIntent"
      ],
      "safety": {
        "defaultTier": "HumanApprove",
        "requiresApproval": true,
        "idempotent": true,
        "supportsRollback": false,
        "supportsCompensation": true
      }
    },
    {
      "capability": "charge:read",
      "supported": true,
      "operations": ["getCharge", "listCharges"],
      "safety": {
        "defaultTier": "Auto",
        "requiresApproval": false,
        "idempotent": true
      }
    },
    {
      "capability": "charge:write",
      "supported": true,
      "operations": ["createCharge"],
      "safety": {
        "defaultTier": "HumanApprove",
        "requiresApproval": true,
        "idempotent": true,
        "supportsRollback": false,
        "supportsCompensation": true
      },
      "notes": "Prefer PaymentIntent flows for most integrations; Charge create exists but is legacy for many payment flows."
    },
    {
      "capability": "refund:write",
      "supported": true,
      "operations": ["createRefund"],
      "safety": {
        "defaultTier": "HumanApprove",
        "requiresApproval": true,
        "idempotent": true
      }
    },
    {
      "capability": "subscription:write",
      "supported": true,
      "operations": ["createSubscription", "updateSubscription", "cancelSubscription"],
      "safety": {
        "defaultTier": "HumanApprove",
        "requiresApproval": true,
        "idempotent": true
      }
    },
    {
      "capability": "subscription:read",
      "supported": true,
      "operations": ["getSubscription", "listSubscriptions"],
      "safety": {
        "defaultTier": "Auto",
        "requiresApproval": false,
        "idempotent": true
      }
    },
    {
      "capability": "invoice:write",
      "supported": true,
      "operations": ["createInvoice", "finalizeInvoice", "voidInvoice"],
      "safety": {
        "defaultTier": "HumanApprove",
        "requiresApproval": true,
        "idempotent": true
      }
    },
    {
      "capability": "invoice:read",
      "supported": true,
      "operations": ["getInvoice", "listInvoices"],
      "safety": {
        "defaultTier": "Auto",
        "requiresApproval": false,
        "idempotent": true
      }
    },
    {
      "capability": "payout:read",
      "supported": true,
      "operations": ["getPayout", "listPayouts"],
      "safety": {
        "defaultTier": "Auto",
        "requiresApproval": false,
        "idempotent": true
      }
    },
    {
      "capability": "balance:read",
      "supported": true,
      "operations": ["getBalance"],
      "safety": {
        "defaultTier": "Auto",
        "requiresApproval": false,
        "idempotent": true
      }
    }
  ]
}
