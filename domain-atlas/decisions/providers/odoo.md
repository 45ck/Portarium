# Odoo (Community Edition)

- Provider ID: `odoo`
- Port Families: `FinanceAccounting`, `ProcurementSpend`
- Upstream: `https://github.com/odoo/odoo`
- Pinned commit: `9dae06643309665b4336329befb60bcec3a5dc07` (vendored as a git submodule; run `npm run domain-atlas:vendor -- --only odoo` to ensure checkout)
- Extracted CIF: `domain-atlas/extracted/odoo/cif.json` (generated by `scripts/domain-atlas/extract-odoo.mjs`)
- Mappings: `domain-atlas/mappings/odoo/FinanceAccounting.mapping.json`, `domain-atlas/mappings/odoo/ProcurementSpend.mapping.json`
- Capability matrices: `domain-atlas/capabilities/odoo/FinanceAccounting.capability-matrix.json`, `domain-atlas/capabilities/odoo/ProcurementSpend.capability-matrix.json`

## What To Extract Next

- Expand `res.partner` field set by merging additional addon extensions (beyond base + account), especially around comms (`mail`) and sales/procurement usage.
- Accounting objects (GL accounts, moves, move lines, payments, invoices/bills).
- Procurement objects (purchase orders, vendors/partners, receipts, RFQs).
- State machines for `account.move` and procurement docs (draft/posted/cancelled etc).

## Current Extraction (Initial)

- CIF: `domain-atlas/extracted/odoo/cif.json`
- Mapping:
  - `domain-atlas/mappings/odoo/FinanceAccounting.mapping.json`
  - `domain-atlas/mappings/odoo/ProcurementSpend.mapping.json`
- Capability matrix:
  - `domain-atlas/capabilities/odoo/FinanceAccounting.capability-matrix.json`
  - `domain-atlas/capabilities/odoo/ProcurementSpend.capability-matrix.json`
- Re-run: `npm run domain-atlas:extract:odoo`

## Mapping Notes (Canonical)

- `res.partner` maps to canonical `Party` (unified person/company/contact-address model).
- Role tags are not pure booleans in base; they emerge from usage and addon fields:
  - `customer_rank` / `supplier_rank` are introduced by accounting (`domain-atlas/upstreams/odoo/addons/account/models/partner.py`).
- Many module-specific models remain `ExternalObjectRef` until proven cross-provider.

## Capability Matrix Notes

- Clarify idempotency strategy for create/update actions (external IDs? unique constraints?).
- Capture reversibility/compensation (refunds, cancels, voids) per action.

## Key Semantics (Party)

- Unified Party:
  - `res.partner` represents people, companies, and contact-address records (address subtypes via `type` selection).
  - Company/person split is expressed via `is_company` + `company_type` (the latter is explicitly “interface only” in the model comments).
- Relationship graph:
  - `parent_id` / `child_ids` model a company-to-contacts structure (a person contact can be a child of a company partner).
  - `commercial_partner_id` is a computed “commercial entity” (important for grouping child addresses/contacts under a single commercial party).
- Tags:
  - Partner tags are first-class: `res.partner.category` and `res.partner.category_id` / `res.partner.category.partner_ids`.
- Name constraint:
  - Odoo enforces a check constraint that `type='contact'` requires `name` (addresses can omit `name`).

## Open Questions

- Best extraction source: ORM model definitions vs PostgreSQL schema vs XML data files?
